<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About | The Male Swiftie Sanctuary</title>
  <link rel="stylesheet" href="../style.css" />
</head>
<body>

  <nav class="navbar">
    <ul class="nav-links">
      <li><a href="../index.html">Home</a></li>
      <li><a href="../script.html">Join Us</a></li>
      <li><a href="about.html" class="active">About</a></li>
      <li id="adminNavItem" style="display: none;"><a href="admin.html">Admin</a></li>
      <li id="logoutNavItem" style="display: none;"><a href="#" id="logoutBtn">Logout</a></li>
    </ul>
  </nav>

  <header>
    <h1>The Male Swiftie Sanctuary</h1>
    <h2>Where Vulnerability Meets Valor</h2>
  </header>

  <section class="about">
    <div class="about-container">
      <div class="about-text">
        <h3>Our Story</h3>
        <p>
          Born from heartbreak, healed by melody — The Male Swiftie Sanctuary is a place for men who feel deeply,
          love fiercely, and cry unapologetically to <em>All Too Well (10 Minute Version)</em>.
        </p>
        <p>
          Here, we redefine strength. It's not about suppressing emotion — it's about channeling it through
          Taylor’s bridge sections and the soft glow of midnight confessionals.
        </p>
        <p>
          Whether you’re a <strong>“Style”</strong> kind of guy, a <strong>“The Archer”</strong> soul, or a full-on
          <strong>“Exile”</strong> wanderer, you belong here. Grab your headphones, light a candle, and let’s heal.
        </p>
      </div>

      <div class="about-image">
        <img src="https://i.imgur.com/vB22Wtr.png" alt="Taylor Swift performing" />
      </div>
    </div>
  </section>

  <div style="text-align: center; padding: 3rem 0;">
    <a href="../index.html" class="back-home-btn">← Back to Home</a>
  </div>

  <footer>
    <p>© 2025 The Male Swiftie Sanctuary — All Feelings Reserved</p>
  </footer>

  <script src="../extra.js"></script>
  <script>
    // Check if user is admin to show admin link and logout button
    const API_URL = window.location.hostname === 'localhost' ? 'http://localhost:3000/api' : '/api';
    
    async function checkAuthStatus() {
      try {
        const response = await fetch(`${API_URL}/auth/status`, {
          credentials: 'include'
        });
        const data = await response.json();
        
        if (data.authenticated) {
          document.getElementById('logoutNavItem').style.display = 'block';
          if (data.role === 'admin') {
            document.getElementById('adminNavItem').style.display = 'block';
          }
        }
      } catch (error) {
        console.log('Not authenticated');
      }
    }
    
    // Logout handler
    const logoutBtn = document.getElementById('logoutBtn');
    if (logoutBtn) {
      logoutBtn.addEventListener('click', async (e) => {
        e.preventDefault();
        try {
          await fetch(`${API_URL}/logout`, {
            method: 'POST',
            credentials: 'include'
          });
          window.location.replace('login.html');
        } catch (error) {
          console.error('Logout error:', error);
        }
      });
    }
    
    checkAuthStatus();
  </script>
</body>
</html>